<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haruon.groupware.user.mapper.EmpMapper">
	<select id="empLogin"
		resultType="com.haruon.groupware.user.entity.Emp"
		parameterType="com.haruon.groupware.user.entity.Emp">
		SELECT
			 e.email email
			,e.emp_pw empPw
			,e.ename ename
			,e.location location
			,e.emp_no empNo
			,e.dep_no depNo
			,d.dname dname
		FROM emp e
		INNER JOIN dept d
		ON e.dep_no = d.dep_no
		WHERE email = #{email} AND emp_pw = #{empPw}
	</select>
	

	<insert id="insertEmp" parameterType="com.haruon.groupware.user.dto.EmpDto" >
		INSERT INTO emp (
		ename
		,emp_pw
		,post_code
		,email
		,address
		,phone
		,dep_no
		,gender
		,birth
		)VALUES(
			#{ename},#{empPw}, #{postCode}, #{email}, #{address}, #{phone} ,#{depNo} ,#{gender} ,#{birth}
		)
	</insert>
	
	

	<!-- 사원번호와 이메일로 사원 조회 -->
  <!-- 사원번호와 이메일로 사원 조회 -->
  	<select id="findEmpByEmail" resultType="com.haruon.groupware.user.dto.EmpDto" parameterType="com.haruon.groupware.user.dto.EmpDto">
    SELECT
    	emp_no empNo
    	,email email
    FROM emp
    WHERE emp_no = #{empNo} AND email = #{email};
	</select>
	
	<update id="updateEmpPw" parameterType="com.haruon.groupware.user.dto.EmpDto">
    UPDATE emp
    SET emp_pw = #{empPw}
    WHERE emp_no = #{empNo} AND email = #{email};
	</update>
</mapper>